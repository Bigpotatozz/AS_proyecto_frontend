
<nav>
    <app-navbar></app-navbar>
</nav>


<div class="container">



    <div class="tabla">

        <div class="agregarButton">
            <div class="card flex justify-content-center">
                <p-button label="Agregar libro" (onClick)="showDialog2()" />
            <p-dialog 
            header="Agregar libro" 
            [modal]="true" 
            [(visible)]="visible2" 
            [style]="{ width: '400px' }" 
            styleClass="custom-dialog">
            
            <div class="modal-content">
                <div class="input-group">
                    <div class="input-label">Nombre:</div>
                    <div class="input-field">
                        <input pInputText autocomplete="off" [(ngModel)]="nombre" />
                    </div>
                </div>
        
                <div class="input-group">
                    <div class="input-label">Autor:</div>
                    <div class="input-field">
                        <input pInputText  autocomplete="off" [(ngModel)]="autor"/>
                    </div>
                </div>
        
                <div class="input-group">
                    <div class="input-label">Genero:</div>
                    <div class="input-field">
                        <input pInputText type="text"  autocomplete="off"  [(ngModel)]="genero"/>
                    </div>
                </div>

                <div class="input-group">
                    <div class="input-label">Libro:</div>
                    <div class="input-field">
                        <input type="file" #fileInput (change)="onFileSelected($event)" [accept]="'.pdf'">
                    </div>
                </div>
        
          
        
                <div class="card flex justify-content-center">
                    <div class="button-group">
                        <p-button 
                            label="Cancel" 
                            styleClass="p-button-secondary"
                            (onClick)="visible2 = false">
                        </p-button>
                        <p-button 
                            label="Save" 
                            (onClick)="registrarLibro({nombre: nombre, autor: autor, genero: genero})">
                        </p-button>
                    </div>
                </div>
                
            </div>
        </p-dialog>
            </div>
        </div>


        <p-table [value]="libros" [tableStyle]="{'min-width': '60rem'}" [paginator]="true" [rows]="5">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="nombre" style="width:20%">
                        Nombre <p-sortIcon field="nombre" />
                    </th>
                    <th pSortableColumn="autor" style="width:20%">
                        Autor<p-sortIcon field="autor" />
                    </th>
                    <th pSortableColumn="genero" style="width:20%">
                        Genero <p-sortIcon field="genero" />
                    </th>
                    <th pSortableColumn="universidad" style="width:20%">
                        Universidad <p-sortIcon field="universidad" />
                    </th>

                    <th></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-libro>
                <tr (click)="onRowClick(libro)">
                    <td>{{ libro.nombre }}</td>
                    <td>{{ libro.autor }}</td>
                    <td>{{ libro.genero }}</td>
                    <td>{{ libro.universidad }}</td>
                    <td class="acciones">
                        <i class="pi pi-pencil" (click)="showDialog(libro)" [style]="{cursor: 'pointer'}"></i>
                        <p-dialog header="Modificar Libro" [(visible)]="visible" [modal]="true"
                            [style]="{width: '450px'}" styleClass="p-fluid">

                            <div class="dialog-content">

                                <div class="input-group">
                                    <div class="input-label">Nombre:</div>
                                    <div class="input-field">
                                        <input pInputText type="text"  autocomplete="off"  [(ngModel)]="nombre_modificar"/>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <div class="input-label">Autor:</div>
                                    <div class="input-field">
                                        <input pInputText type="text"  autocomplete="off"  [(ngModel)]="autor_modificar"/>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <div class="input-label">Genero:</div>
                                    <div class="input-field">
                                        <input pInputText type="text"  autocomplete="off"  [(ngModel)]="genero_modificar"/>
                                    </div>
                                </div>
                               
                                <div class="input-group">
                                    <div class="input-label">Libro:</div>
                                    <div class="input-field">
                                        <input type="file" #fileInput2 (change)="onFileSelected2($event)" [accept]="'.pdf'">
                                    </div>
                                </div>

                                
                            </div>

                            <ng-template pTemplate="footer">
                                <div class="flex justify-content-end gap-2">
                                    <p-button label="Cancel" icon="pi pi-times" (onClick)="visible = false"
                                        styleClass="p-button-text">
                                    </p-button>
                                    <p-button label="Save" icon="pi pi-check"
                                       (onClick)="modificarLibro({nombre: nombre_modificar, autor: autor_modificar, genero: genero_modificar})">
                                    </p-button>
                                </div>
                            </ng-template>
                        </p-dialog>
                    </td>

                </tr>
            </ng-template>
        </p-table>


        <iframe src="" id="pdf"></iframe>
    </div>

 




</div>